webpackJsonp([1,0],[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var s=i(5),n=a(s),r=i(29),o=a(r),c=i(19),l=a(c);i(17),i(16),i(14);var u=i(1),d=a(u);i(15);var f=i(20),p=a(f),v=i(23),m=a(v),h=i(22),_=a(h),b=i(21),y=a(b);n.default.use(d.default),n.default.use(o.default),n.default.use(l.default);var g=new o.default({linkActiveClass:"mui-active",routes:[{name:"Root",path:"/",redirect:"/in_theaters"},{path:"/:type",component:m.default},{path:"/movie/subject/:id",component:_.default},{name:"celebrity",path:"/movie/celebrity/:id",component:y.default}]});new n.default({el:"#app",router:g,render:function(t){return t(p.default)}})},,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={doubanHost:"https://api.douban.com"}},function(t,e,i){var a,s;i(12),a=i(34);var n=i(27);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-d04d118c",t.exports=a},,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,i){var a,s;i(10),a=i(31);var n=i(25);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,t.exports=a},function(t,e,i){var a,s;i(13),a=i(32);var n=i(28);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-ebcd2fa0",t.exports=a},function(t,e,i){var a,s;i(11),a=i(33);var n=i(26);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-25567dae",t.exports=a},function(t,e,i){var a,s;i(9),a=i(35);var n=i(24);s=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(s=a=a.default),"function"==typeof s&&(s=s.options),s.render=n.render,s.staticRenderFns=n.staticRenderFns,s._scopeId="data-v-19a234bb",t.exports=a},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movieList"},[i("header",{staticClass:"mui-bar mui-bar-nav"},[i("h1",{ref:"title",staticClass:"mui-title"},[t._v("我的豆瓣")])]),t._v(" "),i("mt-progress",{attrs:{value:t.progress,"bar-height":5}}),t._v(" "),i("div",{ref:"listWrapper",staticClass:"listWrapper"},[i("ul",[i("li",{directives:[{name:"show",rawName:"v-show",value:t.isSearch,expression:"isSearch"}]},[i("form",{staticClass:"my-form",on:{submit:function(e){e.preventDefault(),t._toSearch(e)}}},[i("div",{staticClass:"mui-input-row"},[i("input",{ref:"searchbox",staticClass:"mui-input-clear",attrs:{type:"search",placeholder:"搜一哈","data-input-clear":"1","data-input-search":"1"}})])])]),t._v(" "),t._l(t.subjects,function(e){return i("MovieLI",{key:e.id,attrs:{movieInfo:e,liHeight:t.liHeight}})})],2)]),t._v(" "),i("nav",{staticClass:"mui-bar mui-bar-tab"},[i("router-link",{staticClass:"mui-tab-item",attrs:{to:"/in_theaters"}},[i("span",{staticClass:"mui-icon mui-icon-home"}),t._v(" "),i("span",{staticClass:"mui-tab-label"},[t._v("正在热映")])]),t._v(" "),i("router-link",{staticClass:"mui-tab-item",attrs:{to:"/coming_soon"}},[i("span",{staticClass:"mui-icon mui-icon-flag"}),t._v(" "),i("span",{staticClass:"mui-tab-label"},[t._v("即将上映")])]),t._v(" "),i("router-link",{staticClass:"mui-tab-item",attrs:{to:"/top250"}},[i("span",{staticClass:"mui-icon mui-icon-videocam"}),t._v(" "),i("span",{staticClass:"mui-tab-label"},[t._v("经典老片")])]),t._v(" "),i("router-link",{staticClass:"mui-tab-item",attrs:{to:"/search"}},[i("span",{staticClass:"mui-icon mui-icon-search"}),t._v(" "),i("span",{staticClass:"mui-tab-label"},[t._v("搜一哈")])])],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("keep-alive",[i("router-view")],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movieDetail"},[i("header",{staticClass:"mui-bar mui-bar-nav"},[i("a",{staticClass:"mui-action-back mui-icon mui-icon-left-nav mui-pull-left",on:{click:function(e){e.preventDefault(),t.back(e)}}}),t._v(" "),i("h1",{staticClass:"mui-title"},[t._v("电影详情")])]),t._v(" "),t.movie?i("img",{staticClass:"background",attrs:{src:t.movie.images.large}}):t._e(),t._v(" "),t.movie?i("div",{ref:"detailWrapper",staticClass:"detailWrapper"},[i("div",[i("div",{staticClass:"meta"},[i("img",{staticClass:"poster",attrs:{src:t.movie.images.large},on:{load:t.loaded}}),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(t.movie.title)+"("+t._s(t.movie.year)+")")]),t._v(" "),i("div",{staticClass:"info"},[t._v("评分："+t._s(t.movie.rating.average))]),t._v(" "),i("div",{staticClass:"info"},[t._v("导演：\n          "),t._l(t.movie.directors,function(e){return i("button",{key:e.id,staticClass:"mui-btn mui-btn-outlined",attrs:{type:"button"},domProps:{textContent:t._s(e.name)},on:{click:function(i){t.toCelebrity(e.id,i)}}})})],2),t._v(" "),i("div",{staticClass:"info"},[t._v("主演：\n          "),t._l(t.movie.casts,function(e){return i("button",{key:e.id,staticClass:"mui-btn mui-btn-outlined",attrs:{type:"button"},domProps:{textContent:t._s(e.name)},on:{click:function(i){t.toCelebrity(e.id,i)}}})})],2)]),t._v(" "),i("div",{staticClass:"summary"},[i("div",{staticClass:"label"},[t._v("摘要：")]),t._v(" "),i("div",{staticClass:"content"},[t._v(t._s(t.movie.summary))])])])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"mui-card",style:{height:t.liHeight+"px"}},[i("router-link",t._b({},"router-link",{to:"/movie/subject/"+t.movieInfo.id}),[i("img",{attrs:{src:t.movieInfo.images.large,alt:""}}),t._v(" "),i("div",{staticClass:"mui-card-content"},[i("div",{staticClass:"mui-content-padded"},[i("p",{staticClass:"name",domProps:{textContent:t._s(t.movieInfo.title)}}),t._v(" "),i("p",[i("strong",[t._v("类型：")]),t._v(t._s(t.movieInfo.genres.join("、")))]),t._v(" "),i("p",[i("strong",[t._v("导演：")]),t._v(t._s(t._f("handleNames")(t.movieInfo.directors)))]),t._v(" "),i("p",[i("strong",[t._v("主演：")]),t._v(t._s(t._f("handleNames")(t.movieInfo.casts)))])])])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"celebrity"},[i("header",{staticClass:"mui-bar mui-bar-nav"},[i("a",{staticClass:"mui-action-back mui-icon mui-icon-left-nav mui-pull-left",on:{click:function(e){e.preventDefault(),t.back(e)}}}),t._v(" "),i("h1",{staticClass:"mui-title"},[t._v("影人介绍")])]),t._v(" "),t.celebrity?i("div",{ref:"celebrityWrapper",staticClass:"celebrityWrapper"},[i("ul",{staticClass:"subWrapper"},[i("li",{staticClass:"info"},[t._v(t._s(t.celebrity.name)+"    "+t._s(t.celebrity.name_en))]),t._v(" "),i("li",{staticClass:"info"},[t._v(t._s(t.celebrity.born_place))]),t._v(" "),i("li",{staticClass:"avatars"},[i("img",{attrs:{src:t.celebrity.avatars.large,alt:""},on:{load:t.loaded}})]),t._v(" "),i("li",{staticClass:"worksTitle"},[t._v("好评作品")]),t._v(" "),i("li",[i("ul",t._l(t.celebrity.works,function(e){return i("MovieLI",{key:e.id,attrs:{movieInfo:e.subject,liHeight:t.liHeight}})}))])])]):t._e()])},staticRenderFns:[]}},,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",components:{}}},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),n=a(s),r=i(1),o=i(3),c=a(o),l=i(4),u=a(l);e.default={data:function(){return{celebrity:!1,liHeight:0}},created:function(){this.liHeight=.38*(window.innerWidth-20)*1.5},activated:function(){this.celebrity=!1,this._getData(this.$route.params.id)},methods:{loaded:function(){this.celebrityScroll.refresh()},back:function(){this.$router.go(-1)},_getData:function(t){var e=this;r.Indicator.open();var i=c.default.doubanHost+"/v2/movie/celebrity/"+t;this.$http.jsonp(i).then(function(t){r.Indicator.close(),e.celebrity=t.body,e.$nextTick(function(){e.initScroll()})},function(t){console.log("获取失败")})},initScroll:function(){this.celebrityScroll=new n.default(this.$refs.celebrityWrapper,{click:!0,probeType:3})}},components:{MovieLI:u.default}}},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),n=a(s),r=i(1),o=i(3),c=a(o);e.default={data:function(){return{movie:!1}},activated:function(){this.movie=!1,this._getData(this.$route.params.id)},methods:{loaded:function(){this.detailList.refresh()},toCelebrity:function(t,e){e._constructed||(t?this.$router.push({name:"celebrity",params:{id:t}}):(alert("id null"),(0,r.Toast)({message:"找不到TA哦",position:"bottom",duration:800})))},back:function(){this.$router.go(-1)},_getData:function(t){var e=this;r.Indicator.open();var i=c.default.doubanHost+"/v2/movie/subject/"+t;this.$http.jsonp(i).then(function(t){r.Indicator.close(),e.movie=t.body,e.$nextTick(function(){e.initScroll()})},function(t){console.log("获取失败")})},initScroll:function(){this.detailList=new n.default(this.$refs.detailWrapper,{click:!0,probeType:3})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},filters:{handleNames:function(t){return t.map(function(t){return t.name}).join("、")}},props:["movieInfo","liHeight"]}},function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),n=a(s),r=i(1),o=i(3),c=a(o),l=i(2),u=a(l);e.default={data:function(){return{liHeight:0,subjects:[],isSearch:!1,url:"",loading:!1,progress:0,maxProDistance:40,total:0,listWrapper:null,params:{}}},created:function(){this.liHeight=.38*(window.innerWidth-20)*1.5,this.url=this.$route.params.type},updated:function(){this.isSearch&&!this.subjects.length&&this.$refs.searchbox.focus()},mounted:function(){var t=this;this.isSearch&&this.$refs.searchbox.focus(),this.$refs.searchbox.addEventListener("focus",function(){this.value=""});var e=function(t,e){var i=0,e="function"==typeof e?e:function(){};t.addEventListener("touchstart",function(t){i?(t.timeStamp-i<300&&e(),i=0):i=t.timeStamp})};e(this.$refs.title,function(){t.listWrapper.scrollTo(0,0,300)})},methods:{_toSearch:function(){this.$refs.searchbox.blur();var t=this.$refs.searchbox.value;this._getData("search",{q:t},"refresh")},_getData:function(t,e,i){var a=this;r.Indicator.open();var s=c.default.doubanHost+"/v2/movie/"+t;e=e?e:{},"in_theaters"===t&&(e.city="深圳"),e.start=e.start?e.start:0,this.params=e,this.$http.jsonp(s,{params:e}).then(function(t){r.Indicator.close(),a.loading=!1,a.isSearch&&!e.q||(a.total=t.body.total,a.params.count=t.body.count,"refresh"===i?a.subjects=t.body.subjects:a.subjects=a.subjects.concat(t.body.subjects),a.$nextTick(function(){a._initScroll()}))},function(t){console.log("获取失败")})},_initScroll:function(){var t=this;this.listWrapper?(this.listWrapper.refresh(),this.listWrapper.scrollTo(0,this.scrollY||0),this.scrollY=0):(this.listWrapper=new u.default(this.$refs.listWrapper,{click:!0,probeType:3}),this.listWrapper.on("touchend",function(){t.progress>=100&&!t.loading&&(t.loading=!0,t._getData(t.url,{},"refresh"))}),this.listWrapper.on("scroll",function(e,i){console.log(e.y),e.y>0&&(t.progress=e.y/t.maxProDistance*100),e.y<=t.listWrapper.maxScrollY&&t.params.start+t.params.count<=t.total&&!t.loading&&(t.loading=!0,t.params.start=t.params.start+t.params.count,t.scrollY=e.y,t._getData(t.$route.params.type,t.params))}))}},watch:{url:function(){return this.subjects=[],this.isSearch="search"===this.url,this.isSearch?void r.Indicator.close():void this._getData(this.url)},$route:function(t){t.path.indexOf("/movie/subject")>-1||t.path.indexOf("celebrity")>-1||(this.url=this.$route.params.type)}},components:{MovieLI:n.default}}},function(t,e){}]);